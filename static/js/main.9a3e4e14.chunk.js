(this["webpackJsonpstock-market-real-time"]=this["webpackJsonpstock-market-real-time"]||[]).push([[0],{197:function(e,t,a){e.exports=a(412)},202:function(e,t,a){},203:function(e,t,a){},232:function(e,t){},412:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),o=a(53),l=a.n(o),r=(a(202),a(165)),s=a(36),i=a(154),u=a(155),m=a(167),h=a(166),k=(a(203),a(156)),d=a.n(k),v=(a(235),a(17)),E=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).socket=d()("wss://le-18262636.bitzonte.com",{path:"/stocks"}),e.state={connected:!0,connected_string:"Disconnect",stocks:{},exchanges:{},name_tricker:{},exchange_total_volume:0},e}return Object(u.a)(a,[{key:"activate",value:function(){this.socketStocks(),this.socketExchanges()}},{key:"componentDidMount",value:function(){this.activate()}},{key:"socketBuy",value:function(){var e=this;this.socket.on("BUY",(function(t){return e.handleSocketBuy(t)}))}},{key:"handleSocketBuy",value:function(e){var t=Object(s.a)({},this.state.stocks),a=e.ticker;t[a].buy_volume+=e.volume,t[a].total_volume+=e.volume;var n=this.state.exchange_total_volume+e.volume;this.setState({exchange_total_volume:n}),this.setState({stocks:t})}},{key:"handleSocketSell",value:function(e){var t=Object(s.a)({},this.state.stocks),a=e.ticker;t[a].sell_volume+=e.volume,t[a].total_volume+=e.volume;var n=this.state.exchange_total_volume+e.volume;this.setState({exchange_total_volume:n}),this.setState({stocks:t})}},{key:"socketSell",value:function(){var e=this;this.socket.on("SELL",(function(t){return e.handleSocketSell(t)}))}},{key:"socketUpdate",value:function(){var e=this;this.socket.on("UPDATE",(function(t){return e.handleSocketUpdate(t)}))}},{key:"handleSocketUpdate",value:function(e){var t=e.ticker,a=Object(s.a)({},this.state.stocks);a[t].historic_higher<e.value&&(a[t].historic_higher=e.value),0===a[t].historic_lower&&(a[t].historic_lower=e.value),a[t].historic_lower>e.value&&(a[t].historic_lower=e.value),a[t].variation=Number((a[t].last_price-e.value)/e.value*100).toFixed(3),a[t].last_price=e.value;var n=this.timeConverter(e.time);a[t].chart_info.push({price:e.value,time:n}),this.setState({stocks:a})}},{key:"socketExchanges",value:function(){var e=this;this.socket.emit("EXCHANGES"),this.socket.once("EXCHANGES",(function(t){return e.handleSocketExchange(t)}))}},{key:"handleSocketExchange",value:function(e){var t={};for(var a in e)t[a]=e[a];this.setState({exchanges:t})}},{key:"socketStocks",value:function(){var e=this;this.socket.emit("STOCKS"),this.socket.once("STOCKS",(function(t){return e.handleSocketStocks(t)}))}},{key:"handleSocketStocks",value:function(e){var t=Object(s.a)({},this.state.stocks);e.map((function(e){return t[e.ticker]={company_name:e.company_name,country:e.country,quote_base:e.quote_base,buy_volume:0,sell_volume:0,total_volume:0,historic_higher:0,historic_lower:0,last_price:0,variation:0,chart_info:[]}})),this.setState({stocks:t});var a={};e.map((function(e){return a[e.company_name]=e.ticker})),this.setState({name_tricker:a}),this.socketBuy(),this.socketSell(),this.socketUpdate()}},{key:"connectedState",value:function(){this.state.connected?(this.socket.disconnect(),this.setState({connected_string:"Connect"})):(this.socket.connect(),this.setState({connected_string:"Disconnect"})),this.setState((function(e){return{connected:!e.connected}}))}},{key:"exchangeBuyVolume",value:function(e){var t=0,a=this.state.exchanges,n=this.state.stocks,c=this.state.name_tricker;return a[e].listed_companies.forEach((function(e){return t+=n[c[e]].buy_volume})),t}},{key:"exchangeSellVolume",value:function(e){var t=0,a=this.state.exchanges,n=this.state.stocks,c=this.state.name_tricker;return a[e].listed_companies.forEach((function(e){return t+=n[c[e]].sell_volume})),t}},{key:"exchangeTotalVolume",value:function(e){var t=0,a=this.state.exchanges,n=this.state.stocks,c=this.state.name_tricker;return a[e].listed_companies.forEach((function(e){return t+=n[c[e]].total_volume})),t}},{key:"exchangeShareAmount",value:function(e){return this.state.exchanges[e].listed_companies.length}},{key:"exchangeMarketShare",value:function(e,t){var a=0,n=this.state.exchanges,c=this.state.stocks,o=this.state.name_tricker;return n[e].listed_companies.forEach((function(e){return a+=c[o[e]].total_volume})),Number(a/t*100).toFixed(3)}},{key:"timeConverter",value:function(e){var t=new Date(1e3*e),a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()];return t.getDate()+" "+a+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()}},{key:"numberWithCommas",value:function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},{key:"render",value:function(){var e=this,t=this.state.stocks,a=this.state.exchanges,n=this.state.exchange_total_volume;return c.a.createElement("div",{className:"App"},c.a.createElement("header",{className:"App-header"},c.a.createElement("link",{rel:"stylesheet",href:"https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css",integrity:"sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh",crossorigin:"anonymous"}),c.a.createElement("div",{className:"margin-div"},c.a.createElement("button",{onClick:function(){return e.connectedState()}},this.state.connected_string)),c.a.createElement("div",{className:"margin-div"},c.a.createElement("h1",null,"EXCHANGES")),c.a.createElement("table",{class:"table"},c.a.createElement("thead",{class:"thead-dark"},c.a.createElement("tr",null,c.a.createElement("th",{scope:"col"},"Ticker"),c.a.createElement("th",{scope:"col"},"Exchange Name"),c.a.createElement("th",{scope:"col"},"Country"),c.a.createElement("th",{scope:"col"},"Address"),c.a.createElement("th",{scope:"col"},"Buy Volume"),c.a.createElement("th",{scope:"col"},"Sell Volume"),c.a.createElement("th",{scope:"col"},"Total Volume"),c.a.createElement("th",{scope:"col"},"Market Share"),c.a.createElement("th",{scope:"col"},"Amount of Shares"))),Object.keys(a).map((function(t,o){return c.a.createElement("tbody",null,c.a.createElement("tr",null,c.a.createElement("td",null,a[t].exchange_ticker),c.a.createElement("td",null,a[t].name),c.a.createElement("td",null,a[t].country),c.a.createElement("td",null,a[t].address),c.a.createElement("td",null,e.numberWithCommas(e.exchangeBuyVolume(t))),c.a.createElement("td",null,e.numberWithCommas(e.exchangeSellVolume(t))),c.a.createElement("td",null,e.numberWithCommas(e.exchangeTotalVolume(t))),c.a.createElement("td",null,e.numberWithCommas(e.exchangeMarketShare(t,n)),"%"),c.a.createElement("td",null,e.numberWithCommas(e.exchangeShareAmount(t)))))}))),c.a.createElement("div",{className:"margin-div"},c.a.createElement("h1",null,"EXCHANGES AND COMPANIES"),c.a.createElement("table",{class:"table"},c.a.createElement("thead",{class:"thead-dark"},c.a.createElement("tr",null,c.a.createElement("th",{scope:"col"},"Ticker"),c.a.createElement("th",{scope:"col"},"Companies"))),Object.keys(a).map((function(e,t){return c.a.createElement("tbody",null,c.a.createElement("tr",null,c.a.createElement("td",null,a[e].exchange_ticker),c.a.createElement("td",null,a[e].listed_companies.join())))})))),c.a.createElement("div",{className:"margin-div"},c.a.createElement("h1",null,"STOCKS")),c.a.createElement("table",{class:"table"},c.a.createElement("thead",{class:"thead-dark"},c.a.createElement("tr",null,c.a.createElement("th",{scope:"col"},"Ticker"),c.a.createElement("th",{scope:"col"},"Company Name"),c.a.createElement("th",{scope:"col"},"Country"),c.a.createElement("th",{scope:"col"},"Quote Base"),c.a.createElement("th",{scope:"col"},"Buy Volume"),c.a.createElement("th",{scope:"col"},"Sell Volume"),c.a.createElement("th",{scope:"col"},"Total Volume"),c.a.createElement("th",{scope:"col"},"Historic Higher"),c.a.createElement("th",{scope:"col"},"Historic Lower"),c.a.createElement("th",{scope:"col"},"Last price"),c.a.createElement("th",{scope:"col"},"% Variation"))),Object.keys(t).map((function(a,n){return c.a.createElement("tbody",null,c.a.createElement("tr",null,c.a.createElement("td",null,a),c.a.createElement("td",null,t[a].company_name),c.a.createElement("td",null,t[a].country),c.a.createElement("td",null,t[a].quote_base),c.a.createElement("td",null,e.numberWithCommas(t[a].buy_volume)),c.a.createElement("td",null,e.numberWithCommas(t[a].sell_volume)),c.a.createElement("td",null,e.numberWithCommas(t[a].total_volume)),c.a.createElement("td",null,e.numberWithCommas(t[a].historic_higher)),c.a.createElement("td",null,e.numberWithCommas(t[a].historic_lower)),c.a.createElement("td",null,e.numberWithCommas(t[a].last_price)),c.a.createElement("td",null,e.numberWithCommas(t[a].variation),"%")))}))),c.a.createElement("h1",null,"CHARTS"),Object.keys(t).map((function(e,a){return c.a.createElement("div",{className:"margin-div"},c.a.createElement("h4",null,e," (",t[e].quote_base,")"),c.a.createElement(v.c,{width:800,height:400,data:Object(r.a)(t[e].chart_info),margin:{top:5,right:30,bottom:5,left:30}},c.a.createElement(v.b,{type:"monotone",dataKey:"price",stroke:"#82ca9d",activeDot:{r:8}}),c.a.createElement(v.a,{stroke:"#ccc",strokeDasharray:"5 5"}),c.a.createElement(v.e,{dataKey:"time",tick:{fontSize:10}}),c.a.createElement(v.f,{dataKey:"price",tick:{fontSize:10},domain:["auto","auto"]}),c.a.createElement(v.d,null)))}))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(E,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[197,1,2]]]);
//# sourceMappingURL=main.9a3e4e14.chunk.js.map